- hosts: "*"
  become: true
  tasks:
    - name: Create virtual-machine with cloud-init
      community.general.proxmox_kvm:
        node: phs-hv-01
        api_user: ansible@pve
        api_password: Ch0c0Late$-1359!
        api_host: phs-hv-01
        name: VM-DOCKER-TEST
        ostype: l26
        cpu: kvm64
        sockets: 2
        cores: 2
        memory: 4096
        agent: 'enabled=1'
        scsi:
          scsi0: 'pool-1:100G,format=qcow2'
        ide:
          ide2: 'ISOs:UBUNTU-22.04.2.iso'
          ide1: 'pool-1:cloudinit,format=qcow2'
        citype: nocloud
        ciuser: abeckett
        cipassword: Chocolate-1245!
        searchdomains: 'homelab.internal'
        nameservers: 192.168.0.210,192.168.0.1
        net:
          net0: 'virtio,bridge=vmbr0'
        ipconfig: 
          ipconfig0: 'gw=192.168.0.1,ip=192.168.0.220/24'
